<nav>
    <button class="hamburger">☰</button>
    <ul class="main-menu desktop-menu">
        <li><a href="/WebSite/index.html">Home</a></li>
        <li>
            <a href="#">Apps</a>
            <ul>
                <li>
                    <a href="#">Produktivität</a>
                    <ul>
                        <li><a href="/WebSite/Buchhaltung-Sorglos/index.html">Buchhaltung-Sorglos</a></li>
                        <li><a href="/WebSite/Anything2ERP/index.html">Anything2ERP</a></li>
                        <li><a href="/WebSite/Sortly-Sorglos/index.html">Sortly-Sorglos</a></li>
                        <li><a href="/WebSite/Sorglos-Wachsen/index.html">Sorglos-Wachsen</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Tools</a>
                    <ul>
                        <li><a href="/WebSite/SpeedTest-Sorglos/index.html">SpeedTest-Sorglos</a></li>
                        <li><a href="/WebSite/My_Grill_Timer-Sorglos/index.html">My Grill Timer</a></li>
                        <li><a href="/WebSite/Eieruhr_Pro-Sorglos/index.html">Eieruhr Pro</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Kreativität</a>
                    <ul>
                        <li><a href="/WebSite/Mein_Malbuch-Sorglos/index.html">Mein Malbuch</a></li>
                        <li><a href="/WebSite/FotoSafe-Sorglos/index.html">FotoSafe-Sorglos</a></li>
                        <li><a href="/WebSite/GedaechtnisProfi-Sorglos/index.html">GedächtnisProfi-Sorglos</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Sonstiges</a>
                    <ul>
                        <li><a href="/WebSite/Mein_Einhorn-Sorglos/index.html">Mein Einhorn-Sorglos</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="/WebSite/Support/index.html">Support</a></li>
    </ul>
    <ul class="main-menu mobile-menu" id="mobile-menu">
        <li><a href="/WebSite/index.html">Home</a></li>
        <li><a href="#" data-action="showCategories">Apps</a></li>
        <li><a href="/WebSite/Support/index.html">Support</a></li>
    </ul>
</nav>

<style>
    /* Fallback-Styling, falls mobile.css nicht lädt */
    @media (max-width: 900px) {
        .desktop-menu {
            display: none;
        }
        .hamburger {
            display: block;
            font-size: 2rem;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0.5rem 1rem;
            position: absolute;
            left: 0;
            top: 0;
        }
        .mobile-menu {
            display: none;
            flex-direction: column;
            width: 100%;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #00ff00; /* Grün als Fallback */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .mobile-menu.active {
            display: flex;
        }
        .mobile-menu > li {
            margin: 0;
            width: 100%;
            text-align: left;
        }
        .mobile-menu li a {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            color: white;
        }
    }
</style>

<script>
    const mobileMenu = document.getElementById('mobile-menu');
    const hamburger = document.querySelector('.hamburger');

    const menuStates = {
        main: [
            { text: 'Home', href: '/WebSite/index.html' },
            { text: 'Apps', action: 'showCategories' },
            { text: 'Support', href: '/WebSite/Support/index.html' }
        ],
        categories: [
            { text: 'Zurück', action: 'showMain' },
            { text: 'Produktivität', action: 'showProductivity' },
            { text: 'Tools', action: 'showTools' },
            { text: 'Kreativität', action: 'showCreativity' },
            { text: 'Sonstiges', action: 'showMisc' }
        ],
        productivity: [
            { text: 'Zurück', action: 'showCategories' },
            { text: 'Buchhaltung-Sorglos', href: '/WebSite/Buchhaltung-Sorglos/index.html' },
            { text: 'Anything2ERP', href: '/WebSite/Anything2ERP/index.html' },
            { text: 'Sortly-Sorglos', href: '/WebSite/Sortly-Sorglos/index.html' },
            { text: 'Sorglos-Wachsen', href: '/WebSite/Sorglos-Wachsen/index.html' }
        ],
        tools: [
            { text: 'Zurück', action: 'showCategories' },
            { text: 'SpeedTest-Sorglos', href: '/WebSite/SpeedTest-Sorglos/index.html' },
            { text: 'My Grill Timer', href: '/WebSite/My_Grill_Timer-Sorglos/index.html' },
            { text: 'Eieruhr Pro', href: '/WebSite/Eieruhr_Pro-Sorglos/index.html' }
        ],
        creativity: [
            { text: 'Zurück', action: 'showCategories' },
            { text: 'Mein Malbuch', href: '/WebSite/Mein_Malbuch-Sorglos/index.html' },
            { text: 'FotoSafe-Sorglos', href: '/WebSite/FotoSafe-Sorglos/index.html' },
            { text: 'GedächtnisProfi-Sorglos', href: '/WebSite/GedaechtnisProfi-Sorglos/index.html' }
        ],
        misc: [
            { text: 'Zurück', action: 'showCategories' },
            { text: 'Mein Einhorn-Sorglos', href: '/WebSite/Mein_Einhorn-Sorglos/index.html' }
        ]
    };

    function renderMobileMenu(state) {
        if (!mobileMenu) {
            console.error('Mobile-Menü-Element nicht gefunden');
            return;
        }
        mobileMenu.innerHTML = '';
        menuStates[state].forEach(item => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.textContent = item.text;
            if (item.href) {
                a.href = item.href;
            } else if (item.action) {
                a.href = '#';
                a.addEventListener('click', (e) => {
                    e.preventDefault();
                    renderMobileMenu(item.action.replace('show', '').toLowerCase());
                });
            }
            li.appendChild(a);
            mobileMenu.appendChild(li);
        });
        mobileMenu.classList.add('active');
    }

    console.log('Viewport-Breite:', window.innerWidth);
    if (window.matchMedia("(max-width: 900px)").matches) {
        console.log('Mobil erkannt');
        if (mobileMenu && hamburger) {
            renderMobileMenu('main');
            hamburger.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Hamburger geklickt');
                mobileMenu.classList.toggle('active');
            });
        } else {
            console.error('mobileMenu oder hamburger nicht gefunden');
        }
    }
</script>
